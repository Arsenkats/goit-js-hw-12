{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["'use strict'\nimport axios from \"axios\";\n\nexport async function getImage(image, page, per_page) {\n  try {\n    const BASE_URL = 'https://pixabay.com';\n    const ENDPOINT = '/api/';\n\n    axios.defaults.baseURL = BASE_URL;\n\n    const params = {\n      key: '45227925-dc4eec2d8e9c6a7da21dc7ebe',\n      q: image,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: per_page,\n    };\n\n    const res = await axios.get(ENDPOINT, { params });\n    console.log(res.data);\n    return res.data;\n  } catch (error) {\n    iziToast.error({\n          title: 'Error',\n          message:\n            `${error}`,\n          layout: 2,\n          position: 'topRight',\n          displayMode: 'once',\n    });\n    throw error;\n    \n  }\n}\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs } from '../main';\nconst lightbox = new SimpleLightbox('.gallery li', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function marcupImage(images) {\n  const marcup = images\n    .map(image => {\n      return `<li class=\"gallery-item\"\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      width=360;\n      height=200;\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags} \" />\n          <div class=\"image-info\">\n               <p>LIKES: ${image.likes}</p>\n                    <p>VIEWS: ${image.views}</p>\n                    <p>COMMENTS: ${image.comments}</p>\n                    <p>DOWNLOADS: ${image.downloads}</p>\n                </div>\n            </a>\n            </li>\n        `;\n    })\n    .join('');\n  refs.imgGallery.insertAdjacentHTML('beforeend', marcup);\n  lightbox.refresh();\n}\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\nexport function showLoadMore() {\n  refs.loadMoreBtn.classList.remove('hidden');\n}\nexport function hideLoadMore() {\n  refs.loadMoreBtn.classList.add('hidden');\n}\n\n\nexport function checkEndPages(currentPage, maxPage) {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n\n    if (maxPage) {\n      iziToast.info({\n        title: 'The end!',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } else {\n    showLoadMore();\n  }\n}","import { getImage } from './js/pixabay-api.js';\nimport {\n  marcupImage,\n  showLoader,\n  hideLoader,\n  showLoadMore,\n  hideLoadMore,\n  checkEndPages,\n} from './js/render-function';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet inputValue = '';\nlet currentPage = 1;\nlet perPage = 15;\nlet maxPage = 1;\nexport const refs = {\n  formSearch: document.querySelector('#search'),\n  inputImgSearch: document.querySelector('.input-img-search'),\n  imgGallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n\nconst lightbox = new SimpleLightbox('.gallery li', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction skipOldElement(x = 0, y = 0) {\n  const liEl = refs.imgGallery.children[0];\n  if (liEl) {\n    const height = liEl.getBoundingClientRect().height;\n    window.scrollBy({\n      top: height * 2,\n      left: y,\n      behavior: 'smooth',\n    });\n  }\n}\n\nrefs.formSearch.addEventListener('submit', async e => {\n  e.preventDefault();\n  console.log('Form submit handler triggered');\n  refs.imgGallery.innerHTML = '';\n  inputValue = e.target.elements.search.value.trim();\n  currentPage = 1;\n\n  \n  hideLoadMore();\n\n  if (inputValue === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please, enter the query.',\n      backgroundColor: '#ef4040',\n      layout: 2,\n      position: 'topRight',\n      displayMode: 'once',\n    });\n    refs.formSearch.reset();\n    return;\n  }\n\n  showLoader();\n\n  try {\n    const data = await getImage(inputValue, currentPage, perPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    if (data.totalHits === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        layout: 2,\n        displayMode: 'once',\n        backgroundColor: '#ef4040',\n        progressBarColor: '#B51B1B',\n        position: 'topRight',\n      });\n      hideLoader();\n      return;\n    }\n\n    marcupImage(data.hits);\n    lightbox.refresh();\n    hideLoader();\n    console.log('Calling showLoadMore()');\n    showLoadMore();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `${error}`,\n      layout: 2,\n      displayMode: 'once',\n      backgroundColor: '#ef4040',\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n  }\n});\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n  currentPage++; \n  console.log('Current Page:', currentPage); // Перевірте значення\n  console.log('Input Value:', inputValue); // Перевірте значення\n  hideLoadMore();\n  showLoader();\n\n  try {\n    const data = await getImage(inputValue, currentPage, perPage);\n    marcupImage(data.hits);\n    lightbox.refresh();\n    hideLoader();\n    checkEndPages(currentPage, maxPage);\n    skipOldElement();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `${error}`,\n      layout: 2,\n      displayMode: 'once',\n      backgroundColor: '#ef4040',\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["getImage","image","page","per_page","BASE_URL","ENDPOINT","axios","params","res","error","lightbox","SimpleLightbox","marcupImage","images","marcup","refs","showLoader","hideLoader","showLoadMore","hideLoadMore","checkEndPages","currentPage","maxPage","inputValue","perPage","skipOldElement","x","y","liEl","height","e","iziToast","data"],"mappings":"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"}